<!DOCTYPE html>
<html>
	<head>
		<title>Próximo tren (Beta)</title>
		<meta charset="utf-8" />
		<meta http-equiv="x-ua-compatible" content="ie=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
		<meta name="theme-color" content="rgb(20, 20, 20)" />
		<!--[if lt IE 9]>
			<script src="./assets/javascripts/html5.js"></script>
		<![endif]-->
		<!--[if (gt IE 8) | (IEMobile)]><!-->
			<link rel="stylesheet" href="css/unsemantic/unsemantic-grid-responsive-rtl.css" />
		<!--<![endif]-->
		<!--[if (lt IE 9) & (!IEMobile)]>
			<link rel="stylesheet" href="css/unsemantic/ie-rtl.css" />
		<![endif]-->
		<script src="js/vendor/jquery-2.1.4.min.js"></script>

		<link rel="stylesheet" href="css/style.css" />
		<link rel="stylesheet" href="css/material-icons.css" />
		<script src="js/vendor/jquery.marquee.js"></script>
		<script src="js/vendor/moment.min.js"></script>
		<script src="js/vendor/moment-duration-format.js"></script>
		<script src="js/script.js"></script>
	</head>
	<body>
		<div id="fondo"></div>
		<header>
			<div class="grid-container">
				<!--<div class="grid-50 push-50 mobile-grid-50">
					<div class="brand" id="NFA" title="Nuevos Ferrocarriles Argentinos"></div>
				</div>
				<div class="grid-50 pull-50 mobile-grid-50" style="text-align: right;">
					<div class="brand" id="min-transporte" title="Ministerio de Transporte"></div>
				</div>-->
				<div class="grid-100 mobile-grid-100">
					<div class="brand" id="NFA" title="Nuevos Ferrocarriles Argentinos"></div>
				</div>
			</div>
		</header>
		<div class="grid-100 grid-parent datos-estacion">
			<div class="grid-container">
				<div class="grid-66 push-33 mobile-grid-100" style="padding:0; margin:0;">
					<div class="grid-50 push-50 mobile-grid-100" onclick="volverAlSelector()">
						<img id="linea" style="padding: 3px 0;" />
					</div>
					<div class="grid-50 pull-50 mobile-grid-100">
						<h1 id="estacion-actual">Estación</h1>
					</div>
				</div>
				<div class="grid-33 pull-66 mobile-grid-100">
					<!--<h1 id="trenes-a">Trenes a...</h1>-->
					<h1><span id="horaactual"></span></h1>
				</div>
			</div>
		</div>
		<div class="grid-100 grid-parent" id="barra-mensaje-alerta">
			<div class="grid-container">
				<div class="grid-80 push-20 mobile-grid-100" style="padding:0; margin:0;">
					<div class="grid-20 push-80 mobile-grid-0">
						<h1 id="estacion-actual-2"></h1>
					</div>
					<div class="grid-80 pull-20 mobile-grid-100" style="overflow: hidden;">
						<h1 id="mensaje-alerta"></h1>
					</div>
				</div>
				<div class="grid-20 pull-80 mobile-grid-0">
					<!--<h1 id="trenes-a">Trenes a...</h1>-->
					<h1><span id="horaactual-msj"></span></h1>
				</div>
			</div>
		</div>
		<main id="selector">
			<div class="selector">
				<div class="grid-container">
					<div class="grid-100 mobile-grid-100">
						<script src="js/selector.js"></script>
						<form id="selector-linea">
							<h1>Seleccioná la línea</h1>
							<div id="listaLineas">
								Cargando...
							</div>
						</form>
						<form id="selector-ramal" style="display: none;">
							<h1>Seleccioná el ramal</h1>
							<div id="listaRamales">
								Seleccioná una línea para ver los ramales disponibles. 
							</div>
						</form>
						<form id="selector-estacion" style="display: none;">
							<h1>Seleccioná la estación</h1>
							<div id="estacionesLinea"></div>
						</form>
						<form id="selector-sentido" style="display: none;">
							<div id="sentidos"></div>
						</form>
						<hr>
						<div id="botonera-acceso" style="display: none;" onclick="mostrarDatos()"><button>Ver los próximos trenes</button></div>
					</div>
				</div>
			</div>
		</main>

		<main id="fuera-de-servicio" style="display:none;">
			<div class="servicios-finalizados">
				<div class="grid-container">
					<div class="grid-100 mobile-grid-100 proximo-tren">
						<i class="material-icons">&#xE533;</i>
						<h1>No hay información de los próximos servicios.</h1>
						<h2>Consultá la cartelera de horarios para más información.</h2>
					</div>
				</div>
			</div>
		</main>

		<main id="en-servicio" style="display:none;">
			<div class="grid-container" id="proximo">
				<div class="grid-100 mobile-grid-100 proximo-tren">
					<div class="cuadro-tren">
						<p class="destino" id="proximo">El próximo hacia destino llega en</p>
						<p class="num-tiempo" id="proximo">Sin datos</p>
						<div class="bloque-servicios-especiales" id="proximo" style="display: none;">
							<div class="grid-33 push-66 mobile-grid-100 cuadro-serv-especiales tipo-serv" id="proximo">
								<p class="tipo-servicio" id="proximo">Servicio normal</p>
							</div>
							<div class="grid-66 pull-33 mobile-grid-100 cuadro-serv-especiales" id="cuadro-estaciones-serv">
								<p id="estaciones-serv-especial">La formación se detiene en todas las estaciónes hasta llegar a destino.</p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="grid-container" id="siguientes">
				<div class="grid-50 push-50 mobile-grid-100 siguiente-tren">
					<div class="cuadro-tren">
						<p class="destino" id="siguiente"></p>
						<p class="num-tiempo" id="siguiente">Sin datos</p>
						<div class="bloque-servicios-especiales" id="siguiente" style="display: none;">
							<div class="grid-100 mobile-grid-100 cuadro-serv-especiales" id="cuadro-tipo-servicio">
								<p class="tipo-servicio" id="siguiente">Servicio normal</p>
							</div>
						</div>
					</div>
				</div>
				<div class="grid-50 pull-50 mobile-grid-100 subsiguiente-tren">
					<div class="cuadro-tren">
						<p class="destino" id="sub-siguiente"></p>
						<p class="num-tiempo" id="sub-siguiente">Sin datos</p>
						<div class="bloque-servicios-especiales" id="sub-siguiente" style="display: none;">
							<div class="grid-100 mobile-grid-100 cuadro-serv-especiales" id="cuadro-tipo-servicio">
								<p class="tipo-servicio" id="sub-siguiente">Servicio normal</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</main>
		<!--<script type="text/javascript">
			$.get("http://trenes.mininterior.gob.ar/v2_pg/lcd_public/ajax_get_datos_formaciones.php?ramal=1&estacion=5&cartel=&rnd=&key=v%23v%23QTUtWp%23MpWRy80Q0knTE10I30kj%23FNyZ",function(data2,status){
					data=data2;
				console.log(data);
			}); 
		</script>-->
		<script type="text/javascript">
			var type = window.location.hash.substr(1);

			var selector = false; 

			if (type !== "") {
				var parts = type.split("&");
				var split1 = parts[0].split(':'); 
				var split2 = parts[1].split(':'); 

				if ((split1[0] === "ramal") || (split2[0] === "estacion")) {
					var ramal = parseInt(split1[1]); 
					var estacion = parseInt(split2[1]); 
				}
				else if (split1[0] === "estacion") {
					var estacion = parseInt(split1[1]); 
					var ramal = parseInt(split2[1]); 
				} 
				else if (split1[0] === "terminal") {
					var terminal = parseInt(split1[1]); 
					var ramal = parseInt(split2[1]); 
				} 
				else if ((split1[0] === "ramal") && (split2[0] === "terminal") ) {
					var terminal = parseInt(split1[1]); 
					var ramal = parseInt(split2[1]); 
				} 
				else{
					var ramal = 0; 
					var estacion = 0; 
					var cartel = 0; 
				};
				$('.datos-estacion').css('display', 'block'); 
				$('main#selector').css('display', 'none'); 
				selector = true; 
				actualizarDatos(); 
				setInterval(function() {actualizarDatos();}, 4000);
			} else {
				selector = false; 
				console.info('Cargando selector inicial'); 
				$('.datos-estacion').css('display', 'none'); 
				$('main#selector').css('display', 'block'); 
			};
		</script>
	</body>
</html>